Company Structure API
Описание
Проект представляет собой API для управления структурой компании. Основные функции включают:

Получение и управление списком департаментов.
Получение и управление списком сотрудников, включая фильтрацию по департаментам и фамилии.
Пагинация списка сотрудников.
Авторизация пользователей с использованием JWT токенов.
Swagger UI для документирования и тестирования API.
Функциональность
Получение списка департаментов с числом сотрудников и суммарным окладом.
Получение списка сотрудников с возможностью фильтрации по фамилии и департаменту.
Добавление, редактирование и удаление сотрудников.
Пагинация для списка сотрудников.
Авторизация пользователей для доступа к данным сотрудников.
Требования
Для запуска проекта необходимо установить следующие компоненты:

Python 3.10+
Django 4.2+
Django REST Framework
Simple JWT (для работы с токенами)
drf-yasg (для создания Swagger документации)
Установка
Клонируйте репозиторий:

bash
Копировать код
git clone https://github.com/your-repo/company-structure-api.git
cd company-structure-api
Создайте виртуальное окружение и активируйте его:

bash
Копировать код
python3 -m venv venv
source venv/bin/activate
Установите зависимости:

bash
Копировать код
pip install -r requirements.txt
Выполните миграции базы данных:

bash
Копировать код
python manage.py migrate
Создайте суперпользователя для доступа к административной панели:

bash
Копировать код
python manage.py createsuperuser
Запустите сервер:

bash
Копировать код
python manage.py runserver
Использование API
Авторизация и токены
Для получения и обновления JWT токенов используйте следующие endpoints:

Получение токена доступа:

URL: http://127.0.0.1:8000/api/token/
Метод: POST
Тело запроса:
json
Копировать код
{
  "username": "your_username",
  "password": "your_password"
}
В ответе получите два токена: access и refresh.
Обновление токена доступа:

URL: http://127.0.0.1:8000/api/token/refresh/
Метод: POST
Тело запроса:
json
Копировать код
{
  "refresh": "your_refresh_token"
}
Работа с департаментами
Получение списка департаментов:

URL: http://127.0.0.1:8000/api/departments/
Метод: GET
Пример ответа:
json
Копировать код
[
  {
    "id": 1,
    "name": "IT",
    "employee_count": 5,
    "total_salary": 300000
  },
  ...
]
Работа с сотрудниками
Получение списка сотрудников (требуется токен авторизации):

URL: http://127.0.0.1:8000/api/employees/
Метод: GET
Пример ответа:
json
Копировать код
{
  "count": 100,
  "next": "http://127.0.0.1:8000/api/employees/?page=2",
  "previous": null,
  "results": [
    {
      "id": 1,
      "full_name": "Иван Иванов",
      "position": "Инженер",
      "salary": 60000,
      "age": 35,
      "department": {
        "id": 1,
        "name": "IT"
      }
    },
    ...
  ]
}
Добавление нового сотрудника (с токеном авторизации):

URL: http://127.0.0.1:8000/api/employees/

Метод: POST

Пример запроса (включая файл с фотографией):

bash
Копировать код
POST /api/employees/
Content-Type: multipart/form-data
Authorization: Bearer <access_token>
Тело запроса:

json
Копировать код
{
  "full_name": "Петр Петров",
  "position": "Инженер",
  "salary": 60000,
  "age": 35,
  "department": 2,
  "photo": <файл_с_фотографией>
}
Удаление сотрудника:

URL: http://127.0.0.1:8000/api/employees/{id}/
Метод: DELETE
Swagger документация
Для просмотра документации API воспользуйтесь Swagger UI:

URL: http://127.0.0.1:8000/swagger/
Тестирование с помощью Postman
Авторизация:

Запросите токен с помощью POST запроса по адресу /api/token/.
Добавьте полученный access_token в заголовок Authorization для последующих запросов.
Запросы к API:

Получите список департаментов: отправьте GET запрос на /api/departments/.
Получите список сотрудников: отправьте GET запрос на /api/employees/, добавив токен в заголовок.
Добавьте нового сотрудника: отправьте POST запрос на /api/employees/, включив фото в качестве файла.
Административная панель
Вы можете управлять департаментами и сотрудниками через Django Admin:

URL: http://127.0.0.1:8000/admin/
Вход с использованием суперпользователя, созданного ранее.
